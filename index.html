
                coin.remove();
            }, 1000);

            // Вибрация устройства при нажатии
            if (window.navigator.vibrate) {
                window.navigator.vibrate(50);
            }

            checkLevelUp();
            saveProgress();
        } else {
            alert('Not enough energy!');
        }
    });

    // Проверка на повышение уровня
    function checkLevelUp() {
        if (count >= level * levelThreshold) {
            level++;
            alert(`Level Up! You are now level ${level}`);
            saveProgress();
        }
    }

    // Функция сохранения данных в LocalStorage
    function saveProgress() {
        localStorage.setItem('count', count);
        localStorage.setItem('energy', energy);
        localStorage.setItem('level', level);
    }

    // Функция загрузки данных из LocalStorage
    function loadProgress() {
        count = parseInt(localStorage.getItem('count')) || 0;
        energy = parseInt(localStorage.getItem('energy')) || 1000;
        level = parseInt(localStorage.getItem('level')) || 1;
        counter.textContent = count;
        updateEnergyBar();
    }

    // Загружаем прогресс при загрузке страницы
    window.addEventListener('load', () => {
        loadProgress();
    });

    // Обработчики нажатий на иконки
    document.getElementById('keys').addEventListener('click', () => {
        showPopup();
    });

    document.getElementById('friends').addEventListener('click', () => {
        showPopup();
    });

    document.getElementById('quests').addEventListener('click', () => {
        showPopup();
    });

    // Показать всплывающее окно
    function showPopup() {
        document.getElementById('popup').classList.add('visible');
    }

    // Закрыть всплывающее окно
    function closePopup() {
        document.getElementById('popup').classList.remove('visible');
    }
</script>
</body>
</html>
